<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TFM</title>
    <link rel="stylesheet" type="text/css" href="css/jTinder.css">


    <script src="/socket.io/socket.io.js"></script>


</head>
<body>
    <!-- start padding container -->
    <div class="wrap">
        <!-- start jtinder container -->
        <div id="tinderslide">
            <ul id="Movies">
                <li class="finalPane">
                    <div class="img" id="finalPaneImg"></div>
                    <div class="dText" id="finalPaneTxt">Finished, Swipe this to find more movies</div>
                </li>
                <li class="pane1">
                    <div class="img" id="pane1Img"></div>
                    <div class="dText" id="pane1Txt">Loading</div>
                </li>
                <li class="pane2">
                    <div class="img" id="pane2Img"></div>
                    <div class="dText" id="pane2Txt">Loading</div>
                </li>
                <li class="pane3">
                    <div class="img" id="pane3Img"></div>
                    <div class="dText" id="pane3Txt">Loading</div>
                </li>
                <li class="pane4">
                    <div class="img" id="pane4Img"></div>
                    <div class="dText" id="pane4Txt">Loading</div>
                </li>
                <li class="pane5">
                    <div class="img" id="pane5Img"></div>
                    <div class="dText" id="pane5Txt">Loading</div>
                </li>
                <li class="tutorialPane">
                    <div class="img" id="tutorialPaneImg"></div>
                    <div class="dText" id="tutorialPaneText">Tutorial slide coming soon</div>
                </li>
            </ul>
        </div>
        <!-- end jtinder container -->
    </div>
    <!-- end padding container -->
    <!-- jTinder trigger by buttons  -->
    <!-- <div class="actions">
        <a href="#" class="dislike"><i></i></a>
        <a href="#" class="like"><i></i></a>
    </div> -->

    <!-- jTinder status text  -->
    <!-- <div id="status"></div> -->

    <!-- jQuery lib -->
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <!-- transform2d lib -->
    <script type="text/javascript" src="js/jquery.transform2d.js"></script>
    <!-- jTinder lib -->
    <script type="text/javascript" src="js/jquery.jTinder.js"></script>










    <!-- jTinder initialization script -->
    <!-- <script>
        $("#tinderslide").jTinder({
	// dislike callback
    onDislike: function (item) {


		//socket.emit("dislike", {username : userName, roomName : room, item = item.index()});
		console.log("dislike");

		//$('#status').html('Dislike image ' + (item.index()+1));
    },
	// like callback
    onLike: function (item) {

		
		//socket.emit("like", {username : userName, roomName : room, item = item.index()});
		console.log("like");

        //$('#status').html('Like image ' + (item.index()+1));
    },
	animationRevertSpeed: 200,
	animationSpeed: 400,
	threshold: 1,
	likeSelector: '.like',
	dislikeSelector: '.dislike'
});

/**
 * Set button action to trigger jTinder like & dislike.
 */
$('.actions .like, .actions .dislike').click(function(e){
	e.preventDefault();
	$("#tinderslide").jTinder($(this).attr('class'));
});
    </script> -->













    <script>
        let userName = prompt("whats your name");
        let room = prompt("room name");
        let ID = "";
        var socket = io();
        //send event that user has joined room
        socket.emit("join room", {username : userName, roomName : room});
    

        // //receive data from server.
        // socket.on('send data',(data)=>{
        //     ID = data.id; //ID will be used later
        //     console.log(" my ID:" + ID);
        // })
        // $("#m").focus();
        // //when form is submitted, capture the input value and then send it to server
        // document
        //   .getElementsByTagName("form")[0]
        //   .addEventListener("submit", function (event) {
        //     event.preventDefault();
        //     socket.emit("chat message", {
        //       value: document.getElementById("m").value,
        //       user: userName,
            
        //     });
    
        //     document.getElementById("m").value = "";
        //   });
        // socket.on("chat message", (data) => {
        //   console.log(data.data.user + ": " + data.id);
        //     displayMessage(data);
        // });
    
        socket.on("movies", (data) => {
            console.log(data);
          console.log(data.movieTitles[0]);
          console.log(data.Images[0]);

var k = 4;
          for(var i=1;i<6;i++){
            console.log("loading" + i)
            document.getElementById("pane" + i + "Txt").textContent=data.movieTitles[k];
            document.getElementById("pane" + i + "Img").style.background = 'url("https://image.tmdb.org/t/p/original' + data.Images[k] + '")';
          document.getElementById("pane" + i + "Img").style.backgroundSize = "100% 100%";
            k--;
          }

          //document.getElementById("pane1Txt").textContent=data.movieTitles[0];
        //   document.getElementById("pane1Img").style.background = 'url("https://image.tmdb.org/t/p/original' + data.Images[0] + '")';
        //   document.getElementById("pane1Img").style.backgroundSize = "100% 100%";


          //document.getElementsByClassName(pane1).style.background = new style
          //style='background: url("../img/pane/pane5.jpg") no-repeat scroll center center;background-size: cover;'
            //https://image.tmdb.org/t/p/w500/kqjL17yufvn9OVLyXYpvtyrFfak.jpg



        //   var list = document.getElementById('Movies');
        //   var text = '<div class="img"></div>\n<div class="dText">Miami Beach</div>\n';
        //   var entry = document.createElement('li');
        //   entry.setAttribute("class", "pane1");
        //   entry.appendChild(document.createTextNode(text));
        //   list.appendChild(entry);




        });
    
        // function displayMessage(data) {
        //     let authorClass = "";
        //   let divClass = ""
        //   //verify that the user ID and the message sent ID is similar 
        //   if (data.id === ID) {
        //       console.log("This person has sent a message")
        //     authorClass = "me";
        //     divClass = "myDiv";
        //   } else {
        //     authorClass = "you";
        //     divClass = "yourDiv";
        //   }
        //   const div = document.createElement("div");
        //   div.className = divClass;
        //   const li = document.createElement("li");
        //   const p = document.createElement("p");
        //   p.className = "time";
        //   p.innerText = moment().format("hh:mm");
        //   div.innerHTML =
        //     '<p class="' +
        //     authorClass +
        //     '">' +
        //     data.data.user +
        //     "</p>" +
        //     '<p class="message"> ' +
        //     data.data.value +
        //     "</p>";
        //   div.appendChild(p);
        //   li.appendChild(div);
    
        //   document.getElementById("messages").appendChild(li);
        //   //scroll to the bottom
        //   window.scrollTo(0, document.body.scrollHeight);
        // }



        $("#tinderslide").jTinder({
	// dislike callback
    onDislike: function (item) {


		console.log("dislike");

		//$('#status').html('Dislike image ' + (item.index()+1));
    },
	// like callback
    onLike: function (item) {

        if(!(item.index()==6||item.index()==0)){
		socket.emit("like", {username : userName, roomName : room, item : 4-item.index()});
        }
        console.log("like");
        //$('#status').html('Like image ' + (item.index()+1));
    },
	animationRevertSpeed: 200,
	animationSpeed: 400,
	threshold: 1,
	likeSelector: '.like',
	dislikeSelector: '.dislike'
});

/**
 * Set button action to trigger jTinder like & dislike.
 */
$('.actions .like, .actions .dislike').click(function(e){
	e.preventDefault();
	$("#tinderslide").jTinder($(this).attr('class'));
});
      </script>


</body>
</html>